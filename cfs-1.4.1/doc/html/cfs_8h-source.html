<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CFS: cfs.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>cfs.h</h1><a href="cfs_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * cfs.h for 1.3.4</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> * The author of this software is Matt Blaze.</span>
00005 <span class="comment"> *              Copyright (c) 1992, 1993, 1994 1997 by AT&amp;T.</span>
00006 <span class="comment"> * Permission to use, copy, and modify this software without fee</span>
00007 <span class="comment"> * is hereby granted, provided that this entire notice is included in</span>
00008 <span class="comment"> * all copies of any software which is or includes a copy or</span>
00009 <span class="comment"> * modification of this software and in all copies of the supporting</span>
00010 <span class="comment"> * documentation for such software.</span>
00011 <span class="comment"> *</span>
00012 <span class="comment"> * This software is subject to United States export controls.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * THIS SOFTWARE IS BEING PROVIDED "AS IS", WITHOUT ANY EXPRESS OR IMPLIED</span>
00015 <span class="comment"> * WARRANTY.  IN PARTICULAR, NEITHER THE AUTHORS NOR AT&amp;T MAKE ANY</span>
00016 <span class="comment"> * REPRESENTATION OR WARRANTY OF ANY KIND CONCERNING THE MERCHANTABILITY</span>
00017 <span class="comment"> * OF THIS SOFTWARE OR ITS FITNESS FOR ANY PARTICULAR PURPOSE.</span>
00018 <span class="comment"> */</span>
00019 
00020 <span class="comment">/* include files specific to cipher modules go here */</span>
00021 <span class="comment">/* (i don't normally like nested includes) */</span>
00022 <span class="preprocessor">#include "<a class="code" href="mcg_8h.html">mcg.h</a>"</span>
00023 <span class="preprocessor">#include "<a class="code" href="safer_8h.html">safer.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="cfs__bf_8h.html">cfs_bf.h</a>"</span>
00025 
<a name="l00026"></a><a class="code" href="cfs_8h.html#a0">00026</a> <span class="preprocessor">#define H_REG 0</span>
<a name="l00027"></a><a class="code" href="cfs_8h.html#a1">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define H_ATTACH 0      </span><span class="comment">/* same as regular */</span>
<a name="l00028"></a><a class="code" href="cfs_8h.html#a2">00028</a> <span class="preprocessor">#define H_ROOT 1</span>
<a name="l00029"></a><a class="code" href="cfs_8h.html#a3">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define H_INVALID 9</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#ifdef SHORTLINKS</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#define H_SLNK 5</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span>
00034 <span class="preprocessor">#ifndef CFS_PORT</span>
<a name="l00035"></a><a class="code" href="cfs_8h.html#a4">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define CFS_PORT 3049</span>
00036 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00037 <span class="preprocessor"></span>
00038 <span class="preprocessor">#ifndef NINSTANCES</span>
<a name="l00039"></a><a class="code" href="cfs_8h.html#a5">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define NINSTANCES 64</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00041 <span class="preprocessor"></span>
<a name="l00042"></a><a class="code" href="cfs_8h.html#a6">00042</a> <span class="preprocessor">#define CFSBLOCK 8      </span><span class="comment">/* granularity of DES encryption */</span>
00043 <span class="comment">/* writing is a bit tricky - if not 8 byte boundry, read in prev &amp; next</span>
00044 <span class="comment">   8 byte boundry first, make the change in place, and write back the whole</span>
00045 <span class="comment">   thing */</span>
00046 
<a name="l00047"></a><a class="code" href="cfs_8h.html#a7">00047</a> <span class="preprocessor">#define STD_DES 0       </span><span class="comment">/* 2 key hybrid single DES */</span>
<a name="l00048"></a><a class="code" href="cfs_8h.html#a8">00048</a> <span class="preprocessor">#define THREE_DES 1     </span><span class="comment">/* 2 key hybrid 3DES */</span>
<a name="l00049"></a><a class="code" href="cfs_8h.html#a9">00049</a> <span class="preprocessor">#define IDEA 2          </span><span class="comment">/* 2 key hybrid IDEA (n/a) */</span>
<a name="l00050"></a><a class="code" href="cfs_8h.html#a10">00050</a> <span class="preprocessor">#define BLOWFISH 3      </span><span class="comment">/* 2 key hybrid BLOWFISH (n/a) */</span>
<a name="l00051"></a><a class="code" href="cfs_8h.html#a11">00051</a> <span class="preprocessor">#define SKIPJACK 4      </span><span class="comment">/* 2 key hybrid SKIPJACK (PCMCIA) (n/a) */</span>
<a name="l00052"></a><a class="code" href="cfs_8h.html#a12">00052</a> <span class="preprocessor">#define MCG 5           </span><span class="comment">/* 1 key hybrid MacGuffin */</span>
<a name="l00053"></a><a class="code" href="cfs_8h.html#a13">00053</a> <span class="preprocessor">#define SAFER_SK128 6   </span><span class="comment">/* 1 key hybrid SAFER-SK128 */</span>
<a name="l00054"></a><a class="code" href="cfs_8h.html#a14">00054</a> <span class="preprocessor">#define TRUE_THREE_DES 7 </span><span class="comment">/* 3 key hybrid 3DES */</span>
00055 
<a name="l00056"></a><a class="code" href="structfhdata.html">00056</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfhdata.html">fhdata</a> {
<a name="l00057"></a><a class="code" href="structfhdata.html#o0">00057</a>         u_char <a class="code" href="structfhdata.html#o0">magic</a>[8];<span class="comment">/* 0x0123456789abcdef */</span>
<a name="l00058"></a><a class="code" href="structfhdata.html#o1">00058</a>         u_short <a class="code" href="structfhdata.html#o1">htype</a>;  <span class="comment">/* 0=reg, 1=attachpt, 2=root(but notused) */</span>
<a name="l00059"></a><a class="code" href="structfhdata.html#o2">00059</a>         u_short <a class="code" href="structinstance.html">instance</a>;       <span class="comment">/* which attach */</span>
<a name="l00060"></a><a class="code" href="structfhdata.html#o3">00060</a>         u_long <a class="code" href="structfhdata.html#o3">fileid</a>;  <span class="comment">/* inode # */</span>
<a name="l00061"></a><a class="code" href="structfhdata.html#o4">00061</a>         u_char <a class="code" href="structfhdata.html#o4">check</a>[8];<span class="comment">/* we just encrypt the date and copy it here */</span>
00062 <span class="preprocessor">#ifdef SHORTLINKS</span>
00063 <span class="preprocessor"></span>        u_long linkid;  <span class="comment">/* To uniquify short links */</span>
00064         u_char <a class="code" href="structfhdata.html#o5">pad</a>[4];  <span class="comment">/* empty */</span>
00065 <span class="preprocessor">#else</span>
<a name="l00066"></a><a class="code" href="structfhdata.html#o5">00066</a> <span class="preprocessor"></span>        u_char <a class="code" href="structfhdata.html#o5">pad</a>[8];  <span class="comment">/* empty */</span>
00067 <span class="preprocessor">#endif</span>
00068 <span class="preprocessor"></span>} <a class="code" href="structfhdata.html">fhdata</a>;
00069 
<a name="l00070"></a><a class="code" href="unionfh__u.html">00070</a> <span class="keyword">typedef</span> <span class="keyword">union </span><a class="code" href="unionfh__u.html">fh_u</a> {
<a name="l00071"></a><a class="code" href="unionfh__u.html#o0">00071</a>         u_char <a class="code" href="unionfh__u.html#o0">opaque</a>[NFS_FHSIZE];
<a name="l00072"></a><a class="code" href="unionfh__u.html#o1">00072</a>         <span class="keyword">struct </span><a class="code" href="structfhdata.html">fhdata</a> fh;
00073 } <a class="code" href="unionfh__u.html">fh_u</a>;
00074 
<a name="l00075"></a><a class="code" href="structcfs__fileid.html">00075</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcfs__fileid.html">cfs_fileid</a> {     <span class="comment">/* hash table entry */</span>
<a name="l00076"></a><a class="code" href="structcfs__fileid.html#o0">00076</a>         <span class="keywordtype">int</span> <a class="code" href="structcfs__fileid.html#o0">fileid</a>;     <span class="comment">/* inode */</span>
<a name="l00077"></a><a class="code" href="structcfs__fileid.html#o1">00077</a>         <span class="keywordtype">int</span> <a class="code" href="structcfs__fileid.html#o1">key</a>;        <span class="comment">/* key id, for future use */</span>
<a name="l00078"></a><a class="code" href="structcfs__fileid.html#o2">00078</a>         <span class="keywordtype">char</span> <a class="code" href="structcfs__fileid.html#o2">vect</a>[9];   <span class="comment">/* pertubation vector */</span>
<a name="l00079"></a><a class="code" href="structcfs__fileid.html#o3">00079</a>         <span class="keywordtype">char</span> <a class="code" href="structcfs__fileid.html#o3">vectname</a>[1024];    <span class="comment">/* name of symlink w/ pert vect */</span>
<a name="l00080"></a><a class="code" href="structcfs__fileid.html#o4">00080</a>         <span class="keywordtype">char</span> *<a class="code" href="structcfs__fileid.html#o4">name</a>; <span class="comment">/* encrypted path, w/r/t cfs root */</span>
00081         <span class="comment">/* the name should be changed to a list of names, and we should make</span>
00082 <span class="comment">           sure we have the right one open.  Lookup (not link) adds names,</span>
00083 <span class="comment">           remove and rmdir delete names. */</span>
<a name="l00084"></a><a class="code" href="structcfs__fileid.html#o5">00084</a>         <span class="keyword">struct </span><a class="code" href="structfdcache.html">fdcache</a> *<a class="code" href="structcfs__fileid.html#o5">fd</a>; <span class="comment">/* fd, if already open, or NULL (reg files only)*/</span>
<a name="l00085"></a><a class="code" href="structcfs__fileid.html#o6">00085</a>         <span class="keywordtype">int</span> <a class="code" href="structcfs__fileid.html#o6">parent</a>;     <span class="comment">/* dir only; -1 for instance root (send back self)*/</span>
00086 <span class="preprocessor">#ifdef SHORTLINKS</span>
00087 <span class="preprocessor"></span>        <span class="keywordtype">int</span> link_count; <span class="comment">/* dir only; for shortlinks. */</span>
00088         <span class="keywordtype">int</span> linkid;     <span class="comment">/* short links only */</span>
00089 <span class="preprocessor">#endif</span>
<a name="l00090"></a><a class="code" href="structcfs__fileid.html#o7">00090</a> <span class="preprocessor"></span>        <span class="keyword">struct </span><a class="code" href="structcfs__fileid.html">cfs_fileid</a> *<a class="code" href="structcfs__fileid.html#o7">next</a>;
<a name="l00091"></a><a class="code" href="structcfs__fileid.html#o8">00091</a>         <span class="keyword">struct </span><a class="code" href="structinstance.html">instance</a> *<a class="code" href="structcfs__fileid.html#o8">ins</a>;   <span class="comment">/* this is redundnat, but helps */</span>
00092 } <a class="code" href="structcfs__fileid.html">cfs_fileid</a>;
00093 
<a name="l00094"></a><a class="code" href="structfdcache.html">00094</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfdcache.html">fdcache</a> {
<a name="l00095"></a><a class="code" href="structfdcache.html#o0">00095</a>         <a class="code" href="structcfs__fileid.html">cfs_fileid</a> *<a class="code" href="structfdcache.html#o0">file</a>;       <span class="comment">/* fh with the file open */</span>
<a name="l00096"></a><a class="code" href="structfdcache.html#o1">00096</a>         <span class="keywordtype">int</span> <a class="code" href="structfdcache.html#o1">fd</a>;         <span class="comment">/* currently open fd */</span>
<a name="l00097"></a><a class="code" href="structfdcache.html#o2">00097</a>         <span class="keywordtype">int</span> <a class="code" href="structfdcache.html#o2">mode</a>;       <span class="comment">/* 0=RO, else RDWR */</span>
<a name="l00098"></a><a class="code" href="structfdcache.html#o3">00098</a>         <span class="keyword">struct </span>filecache *<a class="code" href="structfdcache.html#o3">next</a>; <span class="comment">/* fwd and back ptrs */</span>
<a name="l00099"></a><a class="code" href="structfdcache.html#o4">00099</a>         <span class="keyword">struct </span>filecache *<a class="code" href="structfdcache.html#o4">prev</a>; <span class="comment">/* frontmost is mru */</span>
00100 } <a class="code" href="structfdcache.html">fdcache</a>;
00101 
<a name="l00102"></a><a class="code" href="cfs_8h.html#a15">00102</a> <span class="preprocessor">#define HSIZE 1024</span>
<a name="l00103"></a><a class="code" href="cfs_8h.html#a16">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define HMASK 0x3ff     </span><span class="comment">/* change these together, please */</span>
00104 
<a name="l00105"></a><a class="code" href="cfs_8h.html#a17">00105</a> <span class="preprocessor">#define LARGESMSIZE (32768*CFSBLOCK)</span>
<a name="l00106"></a><a class="code" href="cfs_8h.html#a18">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define SMALLSMSIZE (512*CFSBLOCK)</span>
00107 <span class="preprocessor"></span>
<a name="l00108"></a><a class="code" href="structcfskey.html">00108</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcfskey.html">cfskey</a> {  <span class="comment">/* now holds expanded keys for DES also */</span>
<a name="l00109"></a><a class="code" href="structcfskey.html#o0">00109</a>         <span class="keywordtype">int</span> <a class="code" href="structcfskey.html#o0">cipher</a>;
00110         <span class="keyword">union </span>{ 
00111                 <span class="keyword">struct </span>{ <span class="comment">/* DES */</span>
<a name="l00112"></a><a class="code" href="structcfskey.html#o1">00112</a>                         u_char <a class="code" href="structcfskey.html#o1">primary</a>[128];
<a name="l00113"></a><a class="code" href="structcfskey.html#o2">00113</a>                         u_char <a class="code" href="structcfskey.html#o2">secondary</a>[128];
00114                 } <a class="code" href="structcfskey.html#o3">des</a>;
00115                 <span class="keyword">struct </span>{ <span class="comment">/* two-key 3DES */</span>
00116                         u_char <a class="code" href="structcfskey.html#o4">primary1</a>[128];
00117                         u_char <a class="code" href="structcfskey.html#o5">primary2</a>[128];
00118                         u_char <a class="code" href="structcfskey.html#o6">secondary1</a>[128];
00119                         u_char <a class="code" href="structcfskey.html#o7">secondary2</a>[128];
00120                 } <a class="code" href="structcfskey.html#o8">des3</a>;
00121                 <span class="keyword">struct </span>{ <span class="comment">/* three-key 3DES */</span>
<a name="l00122"></a><a class="code" href="structcfskey.html#o4">00122</a>                         u_char <a class="code" href="structcfskey.html#o4">primary1</a>[128];
<a name="l00123"></a><a class="code" href="structcfskey.html#o5">00123</a>                         u_char <a class="code" href="structcfskey.html#o5">primary2</a>[128];
<a name="l00124"></a><a class="code" href="structcfskey.html#o9">00124</a>                         u_char <a class="code" href="structcfskey.html#o9">primary3</a>[128];
<a name="l00125"></a><a class="code" href="structcfskey.html#o6">00125</a>                         u_char <a class="code" href="structcfskey.html#o6">secondary1</a>[128];
<a name="l00126"></a><a class="code" href="structcfskey.html#o7">00126</a>                         u_char <a class="code" href="structcfskey.html#o7">secondary2</a>[128];
<a name="l00127"></a><a class="code" href="structcfskey.html#o10">00127</a>                         u_char <a class="code" href="structcfskey.html#o10">secondary3</a>[128];
00128                 } <a class="code" href="structcfskey.html#o11">dest3</a>;
00129                 <span class="keyword">struct </span>{ <span class="comment">/* MacGuffin */</span>
<a name="l00130"></a><a class="code" href="structcfskey.html#o12">00130</a>                         <a class="code" href="structmcg__key.html">mcg_key</a> <a class="code" href="structcfskey.html#o1">primary</a>;
<a name="l00131"></a><a class="code" href="structcfskey.html#o13">00131</a>                         <a class="code" href="structmcg__key.html">mcg_key</a> <a class="code" href="structcfskey.html#o2">secondary</a>;
00132                 } <a class="code" href="structcfskey.html#o14">mcg</a>;
00133                 <span class="keyword">struct </span>{ <span class="comment">/* Blowfish */</span>
<a name="l00134"></a><a class="code" href="structcfskey.html#o15">00134</a>                         <a class="code" href="structbf__key__st.html">BF_KEY</a> <a class="code" href="structcfskey.html#o1">primary</a>;
<a name="l00135"></a><a class="code" href="structcfskey.html#o16">00135</a>                         <a class="code" href="structbf__key__st.html">BF_KEY</a> <a class="code" href="structcfskey.html#o2">secondary</a>;
00136                 } <a class="code" href="structcfskey.html#o17">bf</a>;
00137                 <span class="keyword">struct </span>{ <span class="comment">/* SAFER */</span>
<a name="l00138"></a><a class="code" href="structcfskey.html#o18">00138</a>                         <a class="code" href="safer_8h.html#a8">safer_key_t</a> <a class="code" href="structcfskey.html#o1">primary</a>;
<a name="l00139"></a><a class="code" href="structcfskey.html#o19">00139</a>                         <a class="code" href="safer_8h.html#a8">safer_key_t</a> <a class="code" href="structcfskey.html#o2">secondary</a>;
00140                 } <a class="code" href="structcfskey.html#o20">safer</a>;
00141         } <a class="code" href="structcfskey.html#o21">var</a>;
<a name="l00142"></a><a class="code" href="structcfskey.html#o22">00142</a>         <span class="keywordtype">int</span> <a class="code" href="structcfskey.html#o22">smsize</a>; <span class="comment">/* right now either LARGESMSIZE or SMALLSMSIZE */</span>
<a name="l00143"></a><a class="code" href="structcfskey.html#o23">00143</a>         <span class="keywordtype">char</span> *<a class="code" href="structcfskey.html#o23">primask</a>;
<a name="l00144"></a><a class="code" href="structcfskey.html#o24">00144</a>         <span class="keywordtype">char</span> *<a class="code" href="structcfskey.html#o24">secmask</a>;
00145 } <a class="code" href="structcfskey.html">cfskey</a>;
00146 
<a name="l00147"></a><a class="code" href="structinstance.html">00147</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structinstance.html">instance</a> {
<a name="l00148"></a><a class="code" href="structinstance.html#o0">00148</a>         <a class="code" href="structcfs__fileid.html">cfs_fileid</a> *<a class="code" href="structinstance.html#o0">file</a>[<a class="code" href="cfs_8h.html#a16">HMASK</a>+1];
<a name="l00149"></a><a class="code" href="structinstance.html#o1">00149</a>         <span class="keywordtype">char</span> <a class="code" href="structinstance.html#o1">path</a>[NFS_MAXPATHLEN+1]; <span class="comment">/* path to get to files w/r/t root */</span>
<a name="l00150"></a><a class="code" href="structinstance.html#o2">00150</a>         <span class="keywordtype">char</span> <a class="code" href="structinstance.html#o2">name</a>[NFS_MAXNAMLEN+1];  <span class="comment">/* name of the attach point */</span>
<a name="l00151"></a><a class="code" href="structinstance.html#o3">00151</a>         <a class="code" href="structcfskey.html">cfskey</a> <a class="code" href="structinstance.html#o3">key</a>;
<a name="l00152"></a><a class="code" href="structinstance.html#o4">00152</a>         u_char <a class="code" href="structinstance.html#o4">check</a>[8];<span class="comment">/* we just encrypt the date and copy it here */</span>
<a name="l00153"></a><a class="code" href="structinstance.html#o5">00153</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o5">uid</a>;        <span class="comment">/* authorized uid */</span>
00154                         <span class="comment">/* we need a better credential mechanism */</span>
<a name="l00155"></a><a class="code" href="structinstance.html#o6">00155</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o6">id</a>;         <span class="comment">/* same as its position in instances[] */</span>
<a name="l00156"></a><a class="code" href="structinstance.html#o7">00156</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o7">highsec</a>;    <span class="comment">/* use perturbation vectors */</span>
<a name="l00157"></a><a class="code" href="structinstance.html#o8">00157</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o8">anon</a>;       <span class="comment">/* invisability */</span>
<a name="l00158"></a><a class="code" href="structinstance.html#o9">00158</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o9">timeout</a>;    <span class="comment">/* absolute timeout (0 is infinite) */</span>
<a name="l00159"></a><a class="code" href="structinstance.html#o10">00159</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o10">idle</a>;       <span class="comment">/* idle timer (0 is infinite) */</span>
<a name="l00160"></a><a class="code" href="structinstance.html#o11">00160</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o11">access</a>;     <span class="comment">/* last access time (for use by idle timer) */</span>
<a name="l00161"></a><a class="code" href="structinstance.html#o12">00161</a>         <span class="keywordtype">int</span> <a class="code" href="structinstance.html#o12">dead</a>;       <span class="comment">/* to be killed */</span>
00162 } <a class="code" href="structinstance.html">instance</a>;
00163 
<a name="l00164"></a><a class="code" href="cfs_8h.html#a30">00164</a> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="cfs_8h.html#a30">cfserrno</a>;
<a name="l00165"></a><a class="code" href="cfs_8h.html#a31">00165</a> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="cfs_8h.html#a31">errno</a>;
<a name="l00166"></a><a class="code" href="cfs_8h.html#a32">00166</a> <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="ccat_8c.html#a2">cursecs</a>;
00167 
<a name="l00168"></a><a class="code" href="cfs_8h.html#a33">00168</a> <span class="keyword">extern</span> <span class="keywordtype">char</span> <a class="code" href="ccat_8c.html#a1">zerovect</a>[];
00169 
<a name="l00170"></a><a class="code" href="cfs_8h.html#a19">00170</a> <span class="preprocessor">#define CFS_READ O_RDONLY</span>
<a name="l00171"></a><a class="code" href="cfs_8h.html#a20">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define CFS_WRITE (O_RDWR)</span>
00172 <span class="preprocessor"></span>
<a name="l00173"></a><a class="code" href="cfs_8h.html#a34">00173</a> <span class="keyword">extern</span> <span class="keywordtype">char</span> *<a class="code" href="adm_8c.html#a1">admerrs</a>[];
00174 <span class="keywordtype">char</span> *<a class="code" href="cfs_8h.html#a38">admmsg</a>();
00175 
00176 <span class="comment">/* char *keyof(); */</span>
00177 <span class="keywordtype">char</span> *<a class="code" href="cfs_8h.html#a39">encryptname</a>();
00178 <span class="keywordtype">char</span> *<a class="code" href="cfs_8h.html#a40">decryptname</a>();
00179 
00180 <a class="code" href="structcfs__fileid.html">cfs_fileid</a> *<a class="code" href="cfs_8h.html#a41">geth</a>();
00181 
<a name="l00182"></a><a class="code" href="cfs_8h.html#a35">00182</a> <span class="keyword">extern</span> <a class="code" href="structinstance.html">instance</a> *<a class="code" href="cfs_8h.html#a35">instances</a>[];
<a name="l00183"></a><a class="code" href="cfs_8h.html#a36">00183</a> <span class="keyword">extern</span> nfstime <a class="code" href="cfs_8h.html#a36">roottime</a>;
<a name="l00184"></a><a class="code" href="cfs_8h.html#a37">00184</a> <span class="keyword">extern</span> <a class="code" href="structcfs__fileid.html">cfs_fileid</a> <a class="code" href="cfs_8h.html#a37">rootnode</a>;
00185 
00186 <span class="preprocessor">#ifdef hpux</span>
00187 <span class="preprocessor"></span><span class="preprocessor">#define seteuid(x) setresuid(-1,x,-1)</span>
00188 <span class="preprocessor"></span><span class="preprocessor">#define setegid(x) setresgid(-1,x,-1)</span>
00189 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00190 <span class="preprocessor"></span>
00191 <span class="preprocessor">#ifdef AIX320EUIDBUG</span>
00192 <span class="preprocessor"></span><span class="comment">/* AIX 3.2.0 uses ruid for file ownership on creat even though the docs </span>
00193 <span class="comment"> *  say otherwise !!</span>
00194 <span class="comment"> * note that we can still switch back to root. </span>
00195 <span class="comment"> * I bet this is fixed in later AIX releases, in which case this whole </span>
00196 <span class="comment"> *  ifdef can be done away with</span>
00197 <span class="comment"> */</span>
00198 <span class="preprocessor">#include &lt;sys/id.h&gt;</span>
00199 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
00200 <span class="preprocessor">#define become(x) ((x)==NULL?(setuidx(ID_EFFECTIVE | ID_REAL,0)||setgidx(ID_EFFECTIVE|ID_REAL,0)) :\</span>
00201 <span class="preprocessor">           (setgidx(ID_EFFECTIVE|ID_REAL,rgid(x)) || setuidx(ID_EFFECTIVE|ID_REAL, ruid(x))))</span>
00202 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00203"></a><a class="code" href="cfs_8h.html#a21">00203</a> <span class="preprocessor"></span><span class="preprocessor">#define become(x) ((x)==NULL?(seteuid(0)||setegid(0)) :\</span>
00204 <span class="preprocessor">                   (setegid(rgid(x)) || seteuid(ruid(x))))</span>
00205 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00206"></a><a class="code" href="cfs_8h.html#a22">00206</a> <span class="preprocessor"></span><span class="preprocessor">#define keyof(f) (&amp;((f)-&gt;ins-&gt;key))</span>
<a name="l00207"></a><a class="code" href="cfs_8h.html#a23">00207</a> <span class="preprocessor"></span><span class="preprocessor">#define vectof(f) ((f)-&gt;vect)</span>
00208 <span class="preprocessor"></span>
00209 <span class="preprocessor">#ifdef irix</span>
00210 <span class="preprocessor"></span><span class="preprocessor">#define d_fileno d_ino</span>
00211 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00212 <span class="preprocessor"></span>
00213 <span class="preprocessor">#ifdef SOLARIS2X</span>
00214 <span class="preprocessor"></span><span class="preprocessor">#define d_fileno d_ino</span>
00215 <span class="preprocessor"></span><span class="preprocessor">#define bzero(b, l)             memset(b, 0, l)</span>
00216 <span class="preprocessor"></span><span class="preprocessor">#define bcopy(s, d, l)          memcpy(d, s, l)</span>
00217 <span class="preprocessor"></span><span class="preprocessor">#define index(s, c)             strchr(s, c)</span>
00218 <span class="preprocessor"></span><span class="preprocessor">#define bcmp(s, d, l)           (memcmp(s, d, l)? 1 : 0)</span>
00219 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00220 <span class="preprocessor"></span>
00221 <span class="preprocessor">#ifdef BSD44</span>
00222 <span class="preprocessor"></span><span class="comment">/*</span>
00223 <span class="comment">#define d_off d_reclen</span>
00224 <span class="comment">#define d_fileno d_ino</span>
00225 <span class="comment">*/</span>
00226 <span class="preprocessor">#endif</span>
00227 <span class="preprocessor"></span><span class="preprocessor">#include&lt;stdlib.h&gt;</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue Jun 15 09:59:03 2004 for CFS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
