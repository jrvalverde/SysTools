2WD   2000
.WRITE DISK
.REVISED 7/6/64
 
.TEMPORARY STORAGE
.20/24  FILE STATUS WORD
.40/44  FILE CONTROL WORD
.45  LAST BUFFER STATUS
.50/54  INPUT REGISTER
.55  REFERENCE ADDRESS
.56  FIELD LENGTH
.57  FILE STATUS ADDRESS
.60/61  FIRST ADDRESS
.62/63  INPUT ADDRESS
.64/65  OUTPUT ADDRESS
.66/67  LIMIT ADDRESS
.70  CONSTANT 1
.71  CONSTANT 100
.72  CONSTANT 1000
.74  CONTROL POUNT ADDRESS
 
2000  0100  EXIT
2001  0000
2002  0200  RJ MODIFY FILE PARAMETERS
2003  2571
2004  3062
2005  3264
2006  1014
2007  3163
2010  3265  IN - OUT
2011  0607
2012  1006
2013  3166  + LIMIT
2014  3260  - FIRST
2015  1014
2016  3167
2017  3261
2020  3403  STORE NUMBER OF WORDS TO GO
2021  1071
2022  3407  STORE NUMBER OF SECTORS TO GO
2023  3066
2024  3264
2025  1014
2026  3167
2027  3265  LIMIT - OUT
2030  3401
2031  1071
2032  1601
2033  3406  STORE SECTORS TO LIMIT
2034  3001
2035  1277
2036  3404  STORE LENGTH OF FIRST PART
2037  3071
2040  3204
2041  3405  STORE LENGTH OF SECOND PART
2042  3004
2043  1002
2044  3104
2045  2100
2046  7002
2047  5400  STORE SECOND PART ADDRESS
2050  2160
2051  3060
2052  1014
2053  3161
2054  3105
2055  5400  STORE OUT AFTER SPLIT SECTOR
2056  2162
2057  1063
2060  2100
2061  2000
2062  5400
2063  2161
2064  3031
2065  0200  RJ REQUEST CHANNEL
2066  0741
2067  3022
2070  0505  SENSE BEGINNING TRACK
2071  0200  RJ REQUEST TRACK
2072  2401
2073  3421
2074  3422
2075  0200  RJ POSITION DISK
2076  2321
2077  0200  RJ REQUEST TRACK
2100  2401
2101  5400  STORE SPARE TRACK NUMBER
2102  2211
2103  3071
2104  5400  STORE SECTOR LENGTH
2105  7001
2106  3007
2107  0513  JUMP ON FULL SECTOR
2110  3024
2111  1220
2112  0504  JUMP ON END RECORD
2113  0100
2114  2245  JUMP ON CONTINUING RECORD
2115  0000
2116  3003
2117  1277
2120  5400  STORE SECTOR LENGTH
2121  7001
2122  3706
2123  0416  JUMP ON SPLIT SECTOR
2124  3064
2125  1006
2126  3155
2127  1006
2130  3165
2131  6171  READ FULL SECTOR
2132  7002
2133  3071
2134  3565
2135  1063
2136  3564
2137  0327
2140  0000
2141  3004
2142  0410  SENSE ZERO FIRST PART
2143  3064
2144  1006
2145  3155
2146  1006
2147  3165
2150  6104  READ FIRST PART
2151  7002
2152  3060
2153  1006
2154  3155
2155  1006
2156  3161
2157  6105  READ SECOND PART
2160  0000
2161  2000
2162  0000
2163  3465
2164  1063
2165  3464
2166  3022
2167  1074
2170  1201
2171  3401
2172  3023
2173  1001
2174  3101
2175  3132
2176  2100
2177  0200
2200  5400  STORE WRITE FUNCTION
2201  2220
2202  3623
2203  5400  STORE CONTROL BYTE
2204  7000
2205  2300
2206  0000  SECTOR LIMIT
2207  0510
2210  2000
2211  0000  SPARE TRACK
2212  5400
2213  7000
2214  3422
2215  1400
2216  3423
2217  7700  BEGIN WRITE
2220  0000
2221  7400
2222  2000
2223  0502
2224  7300  OUTPUT DATA
2225  7000
2226  7500
2227  3023
2230  0510  SENSE NEW TRACK
2231  3022
2232  0200  RJ POSITION DISK
2233  2321
2234  0200  RJ REQUEST TRACK
2235  2401
2236  5400  STORE SPARE TRACK
2237  2211
2240  3707
2241  0704  SENSE LAST SECTOR
2242  0100
2243  2107  LOOP
2244  0000
2245  1400
2246  5400  CLEAR CONTROL BYTE
2247  7000
2250  5400  CLEAR LENGTH
2251  7001
2252  3022
2253  1074
2254  1201
2255  3401
2256  3023
2257  1001
2260  3101
2261  3132
2262  2100
2263  0200
2264  7600  BEGIN WRITE
2265  7400
2266  2000
2267  0502
2270  7300  OUTPUT DATA
2271  7000
2272  7500
2273  5000
2274  2211
2275  3412
2276  1410
2277  3120
2300  3411
2301  1407  DROP TRACK
2302  0200  RJ PROCESS REQUEST
2303  0761
2304  3031
2305  0200  RJ DROP CHANNEL
2306  0751
2307  0200  RJ UPDATE BUFFER PARAMETERS
2310  2501
2311  0100
2312  2000  EXIT
2313  0000
2314  0000
2315  0000
2316  0000
2317  0000
 
 
.POSITION DISK
 
2320  0100  EXIT
2321  0000
2322  1410
2323  3120
2324  6010  READ DISK STATUS
2325  3011
2326  3322
2327  2200
2330  7760
2331  0411  JUMP ON SAME POSITION
2332  3022
2333  1073
2334  2200
2335  0177
2336  3132
2337  2100
2340  0400
2341  7600  POSITION
2342  3011
2343  3322
2344  1207
2345  0407  JUMP ON SAME GROUP
2346  3022
2347  1207
2350  3132
2351  2100
2352  0600
2353  7600  GROUP
2354  3022
2355  3411
2356  1410
2357  3120
2360  6210  STORE DISK STATUS
2361  3022
2362  1075
2363  1201
2364  1613
2365  3401
2366  4001
2367  5400  STORE SECTOR LIMIT
2370  2206
2371  0100
2372  2320  EXIT
2373  0000
2374  0000
2375  0000
2376  0000
2377  0000
 
 
.REQUEST TRACK
 
2400  0100  EXIT
2401  0000
2402  1410
2403  3120
2404  3411
2405  1406  REQUEST TRACK
2406  0200  RJ PROCESS REQUEST
2407  0761
2410  3077
2411  6010  READ MESSAGE BUFFER
2412  3010
2413  0564  EXIT ON TRACK
2414  3020
2415  5500
2416  2467
2417  2000
2420  2465  DISK X TRACK LIMIT
2421  0200  RJ DAYFILE MESSAGE
2422  0531
2423  3021
2424  0427  SENSE INITIAL TRACK
2425  1400
2426  5400  CLEAR CONTROL BYTE
2427  7000
2430  5400  CLEAR LENGTH
2431  7001
2432  3022
2433  1074
2434  1201
2435  3401
2436  3023
2437  1001
2440  3101
2441  3132
2442  2100
2443  0200
2444  7600  BEGIN WRITE
2445  7400
2446  2000
2447  0502
2450  7300  OUTPUT DATA
2451  7000
2452  7500
2453  3031
2454  0200  RJ DROP CHANNEL
2455  0751
2456  1413  ABORT CP
2457  0200  RJ PROCESS REQUEST
2460  0761
2461  0100
2462  0100  EXIT
2463  0000
2464  0000
2465  0411  D I
2466  2313  S K
2467  5533  SP X
2470  5524  SP T
2471  2201  R A
2472  0313  C K
2473  5514  SP L
2474  1115  I M
2475  1124  I T
2476  5700  .
2477  0000
 
 
.UPDATE BUFFER PARAMETERS
 
2500  0100  EXIT
2501  0000
2502  3024
2503  1220
2504  0532  SENSE END RECORD
2505  3064
2506  3266
2507  1014
2510  3165
2511  3267
2512  0505  SENSE OUT = LIMIT
2513  3060
2514  3464
2515  3061
2516  3465
2517  1400
2520  6010
2521  3064
2522  3413
2523  3065
2524  3414
2525  3053
2526  1006
2527  3155
2530  1006
2531  3154
2532  1603
2533  6210  STORE OUT
2534  0343  EXIT
2535  0000
2536  1400
2537  6010
2540  3060  IN = OUT = FIRST
2541  3462
2542  3464
2543  3413
2544  3061
2545  3463
2546  3465
2547  3414
2550  3053
2551  1006
2552  3155
2553  1006
2554  3154
2555  1602
2556  6210  STORE IN
2557  1601
2560  6210  STORE OUT
2561  0100
2562  2500  EXIT
2563  0000
2564  0000
2565  0000
2566  0000
2567  0000
 
 
.MODIFY PARAMETERS
 
2570  0100  EXIT
2571  0000
2572  1405
2573  6010  READ EST STATUS
2574  3010
2575  3120
2576  6030  READ EST ENTRY
2577  2000
2600  2612
2601  3401  STORE TABLE ADDRESS
2602  4001
2603  0464  SENSE END OF TABLE
2604  3402
2605  3031
2606  4502  ADD CHANNEL NUMBER
2607  3601
2610  0371  LOOP
2611  0000
2612  2217
2613  2221
2614  2224
2615  2226
2616  2264
2617  2265
2620  2270
2621  2272
2622  2341
2623  2353
2624  2444
2625  2445
2626  2450
2627  2452
2630  0000
2631  0000
2632  0000
2633  0000
2634  0000
2635  0000
2636  0000
2637  0000
