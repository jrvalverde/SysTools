APRAB(INPUT,PUNCH)  -  ASSEMBLE PERIPHERAL ABSOLUTE
 
0000  0120 2201 0200 0000 0300  APRAB
0001  0000 0000 0000 0000 0002
0002  1116 2025 2400 0000 0000  INPUT
0003  2025 1603 1000 0000 0000  PUNCH
0004  0000 0000 0000 0000 0000
0005  51100 00031 51200 00034  X1 = (31), X2 = (34)
0006  37777 53710 71400 00001  X7 = X7 - X7, A7 = X1, X4 = 1
0007  36114 37312 03130 00006  X1 = X1 + X4, X3 = X1 - X2, LOOP TO ZERO
0010  01000 00140 00000 00000  RJ PROCESS FIRST CARD
0011  01000 00100 00000 00000  RJ PROCESS DATA CARDS
0012  01000 00040 00000 00000  RJ PUNCH OUTPUT
0013  51100 00017 10710 46000  X1 = (17), X7 = X1
0014  51700 00001 00000 00000  ENTER RA + 1, STOP
0015  00000 00000 00000 00000
0016  0311 1700 0000 0000 0030  CIO
0017  0516 0400 0000 0000 0000  END
0020  0311 1700 0000 0000 0022  CIO
0021  2203 1400 0000 0000 0000  RCL
0022  0000 0000 0000 0000 0000  INPUT CONTROL
0023  0000 0000 0000 0000 0300  FIRST
0024  0000 0000 0000 0000 0301  IN
0025  0000 0000 0000 0000 0300  OUT
0026  0000 0000 0000 0000 2400  LIMIT
0027  0000 0000 0000 0000 0000  NEXT PERIPHERAL ADDRESS
0030  0000 0000 0000 0000 0000  OUTPUT CONTROL
0031  0000 0000 0000 0000 2400  FIRST
0032  0000 0000 0000 0000 2401  IN
0033  0000 0000 0000 0000 2400  OUT
0034  0000 0000 0000 0000 4000  LIMIT
0035  0000 0000 0000 0000 0000  BYTE COUNT
0036  0000 0000 0000 0000 0000
0037  0000 0000 0000 0000 0000
 
.PUNCH OUTPUT
0040  00000 00000 00000 00000  EXIT
0041  51100 00032 71700 00001  X1 = (32), X7 = 1
0042  36771 54710 51100 00031  X7 = X7 + X1, A7 = A1, X1 = (31)
0043  37771 53110 36771 54710  X7 = X7 - X1, A1 = X1, X7 = X7 + X1, A7 = A1
0044  51100 00003 71700 00026  X1 = (3), X7 = 26
0045  36771 51700 00030 46000  X7 = X7 + X1, (30) = X7
0046  51100 00016 10710 46000  X1 = CIO, X7 = X1
0047  51700 00001 46000 46000  ENTER RA + 1
0050  51100 00001 03110 00050  WAIT CLEAR
0051  02000 00040 00000 00000  EXIT
0052  00000 00000 00000 00000
0053  00000 00000 00000 00000
0054  00000 00000 00000 00000
0055  00000 00000 00000 00000
0056  00000 00000 00000 00000
0057  00000 00000 00000 00000
 
.ERROR EXIT
0060  51100 00025 53110 10710  X1 = (25), A1 = X1, X7 = X1
0061  51700 00072 51100 00067  (72) = X7, X1 = MSG
0062  10710 51700 00001 46000  X7 = X1, ENTER RA + 1
0063  51100 00001 03110 00063  WAIT CLEAR
0064  51100 00066 10710 46000  X1 = ABT, X7 = X1
0065  51700 00001 00000 00000  ENTER RA + 1
0066  0102 2400 0000 0000 0000  ABT
0067  1523 0700 0000 0000 0070  MSG
0070  0617 2215 0124 5505 2222  FORMAT ERR
0071  1722 5511 1655 5555 5555  OR IN
0072  0000 0000 0000 0000 0000  INSERT
0073  0000 0000 0000 0000 0000
0074  0000 0000 0000 0000 0000
0075  0000 0000 0000 0000 0000
0076  0000 0000 0000 0000 0000
0077  0000 0000 0000 0000 0000
 
.PROCESS DATA CARDS
0100  00000 00000 00000 00000  EXIT
0101  01000 00200 46000 46000  RJ READ NEXT WORD
0102  10710 20706 71200 00077  X7 = X1, X7L6, X2 = 77
0103  11772 72777 77744 46000  X7 = X7LPX2, X7 = X7 - 33
0104  03370 00135 72777 77767  EXIT ON X7 NEG, X7 = X7 - 8
0105  03270 00135 46000 46000  EXIT ON X7 POS.
0106  43730 11717 20730 46000  X7 = MASK, X7 = X7LPX1, X7L24
0107  51200 00027 13627 46000  X2 = NPA, X6 = X2LDX7
0110  03060 00113 01000 00150  JUMP ON X6 = 0, RJ ADVANCE NPA
0111  02000 00106 00000 00000  LOOP
0112  00000 00000 00000 00000
0113  71200 00077 71300 00033  X2 = 77, X3 = 33
0114  11712 37773 03370 00060  X7 = X1LPX2, X7 = X7 - X3, JUMP ON NEG.
0115  72677 77767 03260 00060  X6 = X7 - 8, JUMP ON POS.
0116  10570 21106 11712 37773  X5 = X7, X1R6, X7 = X1LPX2, X7 = X7 - X3
0117  03370 00060 72677 77767  JUMP ON NEG, X6 = X7 - 8
0120  03260 00060 20703 36557  JUMP ON POS, X7L3, X5 = X5 + X7
0121  21106 11712 37773 46000  X1R6, X7 = X1LPX2, X7 = X7 - X3
0122  03370 00060 72677 77767  JUMP ON NEG, X6 = X7 - 8
0123  03260 00060 20706 36557  JUMP ON POS, X7L6, X5 = X5 + X7
0124  21106 11712 37773 46000  X1R6, X7 = X1LPX2, X7 = X7 - X3
0125  03370 00060 72677 77767  JUMP ON NEG, X6 = X7 - 8
0126  03260 00060 20711 36557  JUMP ON POS, X7L9, X5 = X5 + X7
0127  51100 00035 20560 46000  X1 = BYTE COUNT, X5L48
0130  03010 00132 72117 77776  JUMP ON X1 = 0, X1 = X1 - 1
0131  20560 02000 00130 00000  X5L48, LOOP
0132  51100 00032 53110 36715  X1 = (32), A1 = X1, X7 = X1 + X5
0133  54710 01000 00150 00000  A7 = A1, RJ ADVANCE NPA
0134  01000 00200 00000 00000  RJ READ NEXT WORD
0135  71200 07777 11212 46000  X2 = 7777, X2 = X2LPX1
0136  03120 00134 02000 00101  LOOP TO END OF LINE, LOOP
0137  00000 00000 00000 00000
 
.PROCESS FIRST CARD
0140  00000 00000 00000 00000  EXIT
0141  01000 00200 00000 00000  RJ READ NEXT WORD
0142  43722 11717 51200 00031  X7 = MASK, X7 = X7LPX1, X2 = (31)
0143  53720 43730 20730 11717  A7 = X2, X7 = MASK, X7L24, X7 = X7LPX1
0144  51700 00027 46000 46000  (27) = X7
0145  01000 00200 00000 00000  RJ READ NEXT WORD
0146  71700 07777 11771 46000  X7 = 7777, X7 = X7LPX1
0147  03170 00145 02000 00140  LOOP TO END OF LINE, EXIT
 
.ADVANCE NPA
0150  00000 00000 00000 00000  EXIT
0151  51200 00035 72720 00001  X2 = BYTE COUNT, X7 = X2 + 1
0152  51700 00035 72677 77772  (35) = X7, X6 = X7 - 5
0153  03160 00157 51600 00035  JUMP ON X6 = NZ, (35) = X6
0154  51200 00032 72720 00001  X2 = (32), X7 = X2 + 1
0155  51700 00032 51200 00034  (32) = X7, X2 = LIMIT
0156  37772 03070 00060 46000  X7 = X7 - X2, EXIT ON LIMIT
0157  51200 00027 71700 00001  X2 = (27), X7 = 1
0160  36772 71500 00077 11657  X7 = X7 + X2, X5 = 77, X6 = X5LPX7
0161  71200 00043 37662 46000  X2 = 43, X6 = X6 - X2
0162  03160 00172 71500 00070  SENSE X6 = NZ, X5 = 70
0163  36775 71500 07700 11657  X7 = X7 + X5, X5 = 7700, X6 = X5LPX7
0164  71200 04300 37662 46000  X2 = 4300, X6 = X6 - X2
0165  03160 00172 71500 07000  SENSE X6 = NZ, X5 = 7000
0166  36775 71500 07700 20506  X7 = X7 + X5, X5 = 7700, X5L6
0167  11657 71200 04300 20206  X6 = X5LPX7, X2 = 4300, X2L6
0170  37662 03160 00172 46000  X6 = X6 - X2, SENSE X6 = NZ
0171  71500 07000 20506 36775  X5 = 7000, X5L6, X7 = X7 + X5
0172  51700 00027 02000 00150  (27) = X7, EXIT
0173  00000 00000 00000 00000
0174  00000 00000 00000 00000
0175  00000 00000 00000 00000
0176  00000 00000 00000 00000
0177  00000 00000 00000 00000
 
.READ NEXT WORD
0200  00000 00000 00000 00000  EXIT
0201  51100 00025 51200 00024  X1 = OUT, X2 = IN
0202  51300 00026 51400 00023  X3 = LIMIT, X4 = FIRST
0203  72710 00001 37673 46000  X7 = X1 + 1, X6 = X7 - X3
0204  03160 00205 10740 46000  SENSE LIMIT, X7 = X4
0205  51700 00025 37672 46000  OUT = X7, X6 = X7 - X2
0206  03160 00225 51100 00022  SENSE IN, X1 = (22)
0207  71700 00020 11771 46000  X7 = 20, X7 = X7LPX1
0210  03170 00100 51100 00002  SENSE END RECORD, X1 = (2)
0211  71700 00010 36771 46000  X7 = 10, X7 = X7 + X1
0212  51700 00022 51100 00020  (22) = X7, X1 = CIO
0213  10710 51700 00001 46000  X7 = X1, ENTER RA + 1
0214  51100 00001 03110 00214  WAIT CLEAR
0215  51100 00021 10710 46000  X1 = RCL, X7 = X1
0216  51700 00001 46000 46000  ENTER RA + 1
0217  51100 00001 03110 00217  WAIT CLEAR
0220  51100 00022 20173 46000  X1 = (22), X1L59
0221  03210 00215 51100 00025  LOOP TO RESPONSE, X1 = OUT
0222  51200 00024 37221 53110  X2 = IN, X2 = X2 - X1, A1 = X1
0223  03120 00200 04000 00100  SENSE EMPTY RECORD, EXIT
0224  00000 00000 00000 00000
0225  53170 02000 00200 00000  A1 = X7, EXIT
